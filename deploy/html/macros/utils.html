{# Return currect image path from a fileBone or file module entry #}
{%- macro getImageSrc(info, width = 350, crop = False) -%}
	{%- if info -%}
		{%- if info.servingurl and info.mimetype != "image/svg+xml" -%}
			{{ info.servingurl + ("=s%d" % width) + ("-c" if crop else "") }}
		{%- elif info.dlkey -%}
			{{ "/file/download/%s" % info.dlkey }}
		{%- else -%}
			{{ info }}
		{%- endif -%}
	{%- endif -%}
{%- endmacro -%}

{# Macro to format a price nicely #}
{%- macro formatPrice(value, currency = "â‚¬") -%}
	{%- set value = value|replace(",", ".") -%}
	{{ "%.2f" |format(value|float)|replace(".", ",") + " " + currency }}
{%- endmacro -%}

{%- macro renderFileEntry(document) %}
	<li>
		{% set target = "_self" %}

		{% if document["url"] %}
			{% set url = document["url"] %}
			{% set icon = "link" %}
			{% set target = "_blank" %}
		{% elif document["mimetype"] == "application/pdf" %}
			{% set url = "/file/download/" + document.dlkey|urlencode + "/" + document.name %}
			{% set url = "/static/js/pdfjs/web/viewer.html?file=" + url %}
			{% set icon = "pdf" %}
		{% elif document["mimetype"].startswith("image/") %}
			{% set url = "/file/download/" + document.dlkey + "?fileName=" + document.name %}
			{% set icon = "image" %}
			{% set target = "_blank" %}
		{% else %}
			{% set url = "/file/download/" + document.dlkey + "?fileName=" + document.name + "&download=1" %}
			{% set icon = "file" %}
		{% endif %}

		<a href="{{ url }}" target="{{ target }}">
			<img class="icon" src="/static/icons/{{ icon }}.svg">
			{{ document.name }}
		</a>
	</li>
{%- endmacro -%}
